<!DOCTYPE html>
<!-- Définit le type de document comme étant du HTML5 -->
<html lang="fr">
<!-- Balise d'ouverture du document HTML, avec la langue définie sur "français" -->

<head>
    <!-- Section d'en-tête du document, contenant les métadonnées et les liens vers les ressources externes -->
    <meta charset="UTF-8">
    <!-- Définit l'encodage des caractères en UTF-8 pour une compatibilité maximale avec les différents alphabets -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Configure la fenêtre d'affichage (viewport) pour que le site soit responsive et s'adapte à la largeur de l'écran de l'appareil -->
    <title>Sooxy_Art - Motion Designer</title>
    <!-- Titre de la page qui apparaît dans l'onglet du navigateur -->

    <!-- Intégration de Tailwind CSS via un CDN pour un prototypage rapide des styles -->
    <script src="https://cdn-tailwindcss.vercel.app/"></script>

    <!-- Préconnexion aux serveurs de polices Google pour accélérer le chargement des polices -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Importation des polices de caractères utilisées dans le site -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@200;900&display=swap" rel="stylesheet">
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700&display=swap" rel="stylesheet">

    <style>
        /* Début de la section des styles CSS personnalisés */

        /* Définition des variables CSS (Custom Properties) pour les polices, facilitant la maintenance */
        :root {
            --font-heading: 'Noto Sans TC', sans-serif;
            /* Police pour les titres */
            --font-body: 'Satoshi', sans-serif;
            /* Police pour le corps du texte */
        }

        /* Style pour masquer le curseur système par défaut sur la plupart des éléments, car un curseur personnalisé est utilisé */
        html,
        body,
        a,
        button,
        input,
        textarea,
        select {
            cursor: none;
        }

        /* Active le défilement fluide (smooth scroll) pour les ancres sur la page */
        html {
            scroll-behavior: smooth;
        }

        /* Styles de base pour le corps de la page */
        body {
            font-family: var(--font-body);
            /* Utilise la police définie dans la variable --font-body */
            background-color: #191715;
            /* Couleur de fond sombre */
            color: #EAEAEA;
            /* Couleur de texte claire par défaut */
            overflow-x: hidden;
            /* Empêche le défilement horizontal */
            text-rendering: optimizeLegibility;
            /* Améliore la lisibilité du texte */
        }

        /* S'assure que le curseur personnalisé est appliqué même sur les éléments interactifs */
        a,
        button,
        .lang-switch,
        .project-item.active {
            cursor: none !important;
            /* !important pour forcer la règle */
        }

        /* Styles pour tous les titres (h1 à h6) */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-heading);
            /* Utilise la police pour les titres */
            text-transform: uppercase;
            /* Met le texte en majuscules */
        }

        /* Effet de "différence" pour les titres, qui inverse la couleur par rapport à ce qui se trouve derrière */
        h1:not(.clean-top-text),
        h2:not(.clean-top-text) {
            color: #e8e8e8;
            mix-blend-mode: difference;
        }

        /* Ajustement de la hauteur de ligne pour le titre principal en langue chinoise pour une meilleure lisibilité */
        body.lang-zh h1[data-key="main-title"] {
            line-height: 1.15;
        }

        /* Styles pour l'en-tête (header) */
        header {
            position: fixed;
            /* Le header reste fixe en haut de la page lors du défilement */
            top: 0;
            left: 0;
            width: 100%;
            z-index: 50;
            /* Assure que le header est au-dessus de la plupart des autres éléments */
            height: 56px;
            /* Hauteur fixe */
        }

        header nav {
            position: relative;
            /* Positionnement relatif pour le contexte des enfants */
        }

        /* Pseudo-élément utilisé pour créer le fond noir qui apparaît au défilement */
        header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #191715;
            z-index: -1;
            /* Placé derrière le contenu du header */
            transform: translateY(-150%);
            /* Initialement caché au-dessus de l'écran */
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Animation de transition douce */
        }

        /* Lorsque le header a la classe "scrolled", le fond noir glisse vers le bas pour devenir visible */
        header.scrolled::after {
            transform: translateY(0);
        }

        /* Styles pour les liens et textes dans la navigation */
        header nav a,
        header nav li>span {
            color: #e8e8e8;
            transition: color 0.3s ease, opacity 0.3s ease;
            /* Transition douce pour les changements de couleur et d'opacité */
        }

        /* Empêche les liens de la navigation de passer à la ligne */
        header nav a {
            white-space: nowrap;
        }

        /* Styles pour l'écran de pré-chargement (preloader) */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #191715;
            z-index: 9999;
            /* Au-dessus de tout le reste */
            display: flex;
            justify-content: center;
            align-items: center;
            /* Centre le contenu verticalement et horizontalement */
            transition: opacity 0.8s cubic-bezier(0.77, 0, 0.175, 1), visibility 0.8s cubic-bezier(0.77, 0, 0.175, 1);
            /* Animation de fondu en sortie */
        }

        /* Lorsque le pré-chargement est terminé, il devient transparent et invisible */
        #preloader.loaded {
            opacity: 0;
            visibility: hidden;
        }

        /* Styles pour le texte du loader avec effet "glitch" */
        .loader-text {
            font-family: var(--font-heading);
            position: relative;
            color: #EAEAEA;
            opacity: 0;
            /* Initialement invisible */
            animation: fadeIn 0.1s 0.5s forwards;
            /* Apparaît en fondu */
            font-weight: 900;
        }

        .loader-text span {
            display: inline-block;
            position: relative;
        }

        /* Les pseudo-éléments sont utilisés pour créer les couches de couleur (rouge et bleu) de l'effet glitch */
        .loader-text span::before,
        .loader-text span::after {
            content: attr(data-text);
            /* Récupère le texte de l'attribut data-text */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #191715;
            overflow: hidden;
        }

        .loader-text span::before {
            left: 3px;
            text-shadow: -2px 0 red;
            /* Ombre rouge décalée */
            animation: glitch-anim-1 1.5s infinite alternate-reverse steps(2, end);
            /* Animation du glitch */
        }

        .loader-text span::after {
            left: -3px;
            text-shadow: -2px 0 blue;
            /* Ombre bleue décalée */
            animation: glitch-anim-2 1.8s infinite alternate-reverse steps(2, end);
            /* Animation du glitch */
        }

        /* Animation pour faire apparaître le texte du loader */
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        /* Keyframes pour les animations de l'effet glitch, en modifiant le "clip-path" pour ne montrer que des morceaux du texte */
        @keyframes glitch-anim-1 {
            0% {
                clip-path: inset(10% 0 85% 0);
            }

            20% {
                clip-path: inset(70% 0 10% 0);
            }

            40% {
                clip-path: inset(45% 0 45% 0);
            }

            60% {
                clip-path: inset(90% 0 2% 0);
            }

            80% {
                clip-path: inset(25% 0 60% 0);
            }

            100% {
                clip-path: inset(5% 0 88% 0);
            }
        }

        @keyframes glitch-anim-2 {
            0% {
                clip-path: inset(80% 0 5% 0);
            }

            20% {
                clip-path: inset(15% 0 70% 0);
            }

            40% {
                clip-path: inset(60% 0 30% 0);
            }

            60% {
                clip-path: inset(5% 0 90% 0);
            }

            80% {
                clip-path: inset(55% 0 20% 0);
            }

            100% {
                clip-path: inset(30% 0 65% 0);
            }
        }

        /* Styles pour l'animation d'apparition des sections au défilement */
        .reveal {
            opacity: 0;
            transform: translateY(40px);
            /* Initialement transparent et décalé vers le bas */
            transition: opacity 1.2s cubic-bezier(0.165, 0.84, 0.44, 1), transform 1.2s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        /* Lorsque la classe "visible" est ajoutée par JavaScript, l'élément devient opaque et revient à sa position d'origine */
        .reveal.visible {
            opacity: 1;
            transform: translate(0, 0);
        }

        /* Styles pour le carrousel de projets "Fractal Art" */
        #project-carousel-container {
            width: 100%;
            display: flex;
            align-items: center;
            overflow: hidden;
            /* Cache les éléments qui dépassent */
            user-select: none;
            /* Empêche la sélection du texte/image */
        }

        #carousel-track {
            display: flex;
            height: 100%;
            align-items: center;
        }

        .project-item {
            flex-shrink: 0;
            /* Empêche les éléments de se réduire */
            height: 85%;
            /* Hauteur par défaut (non actif) */
            margin: 0;
            position: relative;
            aspect-ratio: 9 / 16;
            /* Format vertical */
            overflow: hidden;
            transition: height 0.6s cubic-bezier(0.86, 0, 0.07, 1);
            /* Animation de la hauteur */
        }

        .project-item-inner {
            width: 100%;
            height: 100%;
            transition: filter 0.6s ease;
            /* Animation pour l'ombre */
        }

        /* L'élément actif prend 100% de la hauteur */
        .project-item.active {
            height: 100%;
        }

        /* Ajoute une ombre portée à l'élément actif */
        .project-item.active .project-item-inner {
            filter: drop-shadow(16px 0 20px rgba(25, 23, 21, 0.25)) drop-shadow(-16px 0 20px rgba(25, 23, 21, 0.25));
        }

        /* Pseudo-élément pour créer une superposition sombre sur les éléments non actifs */
        .project-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #191715;
            opacity: 0.25;
            transition: opacity 0.6s cubic-bezier(0.86, 0, 0.07, 1);
        }

        /* La superposition devient transparente pour l'élément actif */
        .project-item.active::after {
            opacity: 0;
        }

        /* Section principale (Hero) */
        #hero-section {
            position: relative;
            z-index: 10;
            height: 100vh;
            /* Prend toute la hauteur de la fenêtre */
        }

        /* Styles pour les icônes des réseaux sociaux */
        .social-icon {
            color: #888;
            transition: color 0.3s ease;
        }

        .social-icon:hover {
            color: #e8e8e8;
        }

        /* Styles pour l'image de fond avec effet de parallaxe */
        #parallax-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* Derrière le contenu de la section Hero */
            opacity: 1;
            background-image: url('images/image-background.png');
            background-size: cover;
            background-position: 75% center;
            background-repeat: no-repeat;
        }

        /* Styles pour le sélecteur de langue */
        .lang-switch {
            opacity: 0.5;
            /* Langues non actives sont semi-transparentes */
        }

        .lang-switch.active {
            opacity: 1;
            /* Langue active est opaque */
        }

        header nav .lang-switch:hover {
            opacity: 1;
            /* Opacité au survol */
        }

        /* Styles pour l'effet de lumière qui balaie l'image active du carrousel */
        .project-item .sweep-light-wrapper {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .project-item.active .sweep-light-wrapper {
            opacity: 1;
        }

        .project-item.active .sweep-light {
            animation: sweep 1.5s cubic-bezier(0.4, 0, 0.2, 1) 0.5s;
            /* Déclenche l'animation sur l'élément actif */
        }

        /* Animation du balayage de lumière */
        @keyframes sweep {
            0% {
                transform: translateX(-150%) skewX(-20deg);
            }

            100% {
                transform: translateX(250%) skewX(-20deg);
            }
        }

        /* Styles pour la flèche d'invitation au défilement */
        .scroll-down-arrow {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            width: 24px;
            height: 24px;
            color: #e8e8e8;
            mix-blend-mode: difference;
            /* Effet d'inversion de couleur */
            animation: bounce-arrow 3s ease-in-out infinite;
            /* Animation de rebond */
            transition: opacity 0.3s ease;
        }

        /* Cache la flèche quand elle a la classe .hidden */
        .scroll-down-arrow.hidden {
            opacity: 0;
            pointer-events: none;
            /* Désactive les clics */
        }

        /* Animation de rebond pour la flèche */
        @keyframes bounce-arrow {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateX(-50%) translateY(0);
                opacity: 0.8;
            }

            40% {
                transform: translateX(-50%) translateY(10px);
                opacity: 0.4;
            }

            60% {
                transform: translateX(-50%) translateY(5px);
                opacity: 0.8;
            }
        }

        /* Styles pour le curseur personnalisé */
        #custom-cursor {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            /* Le curseur ne doit pas intercepter les clics */
            z-index: 99999;
            /* Au-dessus de tout */
            mix-blend-mode: difference;
            /* Effet d'inversion de couleur */
        }

        #cursor-dot {
            /* Le point central du curseur */
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background-color: #e8e8e8;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.2s ease;
        }

        #cursor-outline {
            /* Le cercle extérieur du curseur */
            position: absolute;
            top: 50%;
            left: 50%;
            width: 25px;
            height: 25px;
            border: 1px solid #e8e8e8;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.2s cubic-bezier(0, 0.5, 0.58, 1), opacity 0.2s ease, width 0.2s ease, height 0.2s ease;
        }

        /* Réduit la taille du cercle extérieur au survol d'un élément interactif */
        #custom-cursor.hovered #cursor-outline {
            width: 20px;
            height: 20px;
        }

        /* Agrandit le point central au survol */
        #custom-cursor.hovered #cursor-dot {
            transform: translate(-50%, -50%) scale(1.2);
        }

        /* Styles pour l'effet de distorsion sur les titres */
        .distort-container {
            position: relative;
            /* Variables CSS pour la position de la souris et le rayon du masque */
            --mask-radius: 0px;
            --mouse-x: 0px;
            --mouse-y: 0px;
            margin-bottom: 4rem;
        }

        .distort-text {
            font-weight: 900;
            text-transform: uppercase;
        }

        .distort-text.top-layer {
            /* Couche de texte supérieure (visible normalement) */
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }

        .distort-text.overlay {
            /* Couche de texte avec l'effet de distorsion */
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            filter: url(#turbulence-filter);
            /* Applique le filtre SVG */
            /* Le masque radial suit la souris et ne révèle l'effet que dans un cercle autour d'elle */
            mask-image: radial-gradient(circle var(--mask-radius) at var(--mouse-x) var(--mouse-y), black, transparent);
            -webkit-mask-image: radial-gradient(circle var(--mask-radius) at var(--mouse-x) var(--mouse-y), black, transparent);
            transition: --mask-radius 0.2s ease-out;
            /* Animation douce du rayon du masque */
        }

        .distort-container-small .overlay {
            filter: url(#turbulence-filter-small);
            /* Utilise un filtre de turbulence plus petit pour les textes plus petits */
        }

        .distort-text.base {
            /* Le texte de base est rendu invisible, il sert uniquement à occuper l'espace */
            opacity: 0;
        }

        /* Canaux de couleur pour l'effet d'aberration chromatique */
        .distort-text.channel-orange {
            color: #ff9900;
            transform: translate(1px, -1px);
        }

        .distort-text.channel-b {
            color: #00aaff;
            transform: translate(-1px, 1px);
        }

        /* Couche de texte propre, sans effet, affichée par-dessus tout */
        .clean-top-text {
            position: absolute;
            top: 0;
            left: 0;
            color: #e8e8e8;
            mix-blend-mode: normal;
            /* Pas de mode de fusion */
            pointer-events: none;
        }

        /* Styles spécifiques pour les titres dans la section du carrousel vidéo (fond clair) */
        #video-carousel-section .clean-top-text,
        #video-carousel-section .distort-text.base {
            color: #191715;
            /* Texte noir */
            mix-blend-mode: normal;
        }

        /* Styles spécifiques pour les titres dans la section des projets (fond sombre) */
        #projets .distort-text.top-layer,
        #projets .distort-text.base {
            color: #e8e8e8;
            /* Texte clair */
            mix-blend-mode: normal;
        }

        #projets .clean-top-text {
            color: #e8e8e8;
        }

        /* Styles pour la lightbox (visionneuse d'images) */
        #lightbox {
            transition: opacity 0.3s ease-in-out;
        }

        #lightbox.visible {
            opacity: 1;
            pointer-events: auto;
        }

        #lightbox-close {
            transition: transform 0.2s ease;
        }

        #lightbox-close:hover {
            transform: scale(1.1);
        }

        /* Styles communs pour les titres de section */
        #video-carousel-section .distort-text,
        #video-carousel-section .clean-top-text,
        #projets .distort-text,
        #projets .clean-top-text {
            font-weight: 200;
            letter-spacing: 10pt;
            /* Espacement des lettres large */
            width: 100%;
            text-align: center;
        }

        /* Styles communs pour les sections principales */
        #video-carousel-section,
        #project-section-wrapper {
            position: relative;
            z-index: 20;
            padding-top: 4rem;
            padding-bottom: 6rem;
        }

        /* Fond texturé pour la section du carrousel vidéo (inversé pour être blanc) */
        #video-carousel-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('images/bg-black.png');
            background-size: cover;
            background-position: center;
            filter: invert(1);
            /* Inverse les couleurs de l'image de fond */
            z-index: -1;
        }

        /* Conteneur du carrousel vidéo */
        #video-carousel-container {
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        #video-carousel-track {
            display: flex;
            will-change: transform;
            /* Optimisation des performances pour l'animation de transformation */
        }

        /* Style pour une "diapositive" du carrousel vidéo */
        .video-grid-slide {
            flex-shrink: 0;
            width: 100%;
            padding: 0 5%;
            box-sizing: border-box;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            /* Grille de 2 colonnes par défaut */
            gap: 1.25rem;
        }

        /* Styles pour les flèches de navigation du carrousel vidéo */
        .video-nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 30;
            background: none;
            color: #191715;
            border: 1px solid #191715;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: transform 0.3s ease;
        }

        .video-nav-arrow:hover {
            transform: translateY(-50%) scale(1.1);
        }

        .video-nav-arrow.prev {
            left: 3rem;
            /* Positionnée plus près du bord */
        }

        .video-nav-arrow.next {
            right: 3rem;
            /* Positionnée plus près du bord */
        }

        .video-nav-arrow.disabled {
            opacity: 0.1;
            pointer-events: none;
        }

        /* Styles pour la lightbox vidéo */
        #video-lightbox {
            transition: opacity 0.3s ease-in-out;
        }

        #video-lightbox.visible {
            opacity: 1;
            pointer-events: auto;
        }

        #video-lightbox-content {
            width: 90%;
            max-width: 1280px;
            aspect-ratio: 16 / 9;
            /* Format 16:9 pour la vidéo */
        }

        #video-lightbox iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        main {
            isolation: isolate;
            /* Crée un nouveau contexte d'empilement pour éviter les problèmes de z-index */
        }

        /* Fond texturé pour la section des projets */
        #project-section-wrapper {
            background-image: url('images/bg-black.png');
            background-size: cover;
            background-position: center;
        }

        /* Fond texturé pour le pied de page */
        footer {
            background-image: url('images/bg-black.png');
            background-size: cover;
            background-position: top;
        }

        /* Conteneur pour les points de navigation du carrousel vidéo */
        #video-carousel-dots {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
        }

        .video-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #191715;
            margin: 0 4px;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .video-dot.active {
            opacity: 1;
        }

        /* --- STYLES RESPONSIVES --- */

        /* Pour les écrans jusqu'à 1440px de large */
        @media (max-width: 1440px) {
            .video-grid-slide {
                grid-template-columns: repeat(2, 1fr);
                /* 2 colonnes */
            }
        }

        /* Pour les tablettes (jusqu'à 1024px) */
        @media (max-width: 1024px) {
            .video-grid-slide {
                padding: 0 10%;
                /* Augmente les marges latérales */
            }
        }

        /* Pour les mobiles (jusqu'à 768px) */
        @media (max-width: 768px) {

            /* L'en-tête prend une hauteur automatique pour s'adapter au menu vertical */
            header {
                height: auto;
                padding-bottom: 0.75rem;
            }

            header nav {
                transform: translateY(10px);
            }

            /* Le menu de navigation passe en colonne */
            header nav ul {
                flex-direction: column;
                align-items: flex-end;
                /* Aligné à droite */
                gap: 0.25rem;
                /* Espace réduit entre les éléments */
            }

            header nav ul>li,
            header nav ul li:nth-child(3)>span {
                margin-left: 0 !important;
                /* Annule les marges de Tailwind */
            }

            header nav ul li:nth-child(3) {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 0.5rem;
            }

            header nav ul li:nth-child(3) span:not(.lang-switch) {
                display: inline;
            }

            header nav ul li:nth-child(3)>span:first-child {
                display: none;
                /* Cache le séparateur "|" */
            }

            /* Ajustement de la taille des polices pour les titres */
            h1 {
                font-size: 3rem;
                line-height: 1.1;
            }

            h2 {
                font-size: 1.5rem;
            }

            #video-carousel-section .distort-text,
            #projets .distort-text,
            #projets .clean-top-text {
                letter-spacing: 5pt;
                /* Espacement des lettres réduit */
            }

            /* Le carrousel vidéo passe à 1 colonne */
            .video-grid-slide {
                grid-template-columns: repeat(1, 1fr);
                padding: 0 15%;
                gap: 2rem;
            }

            /* Rapproche les flèches du bord sur mobile */
            .video-nav-arrow.prev {
                left: 1rem;
            }

            .video-nav-arrow.next {
                right: 1rem;
            }

            /* Réduit le padding des sections */
            #project-section-wrapper,
            #video-carousel-section {
                padding-top: 2rem;
                padding-bottom: 4rem;
            }

            .distort-container {
                margin-bottom: 2rem;
            }

            /* Le pied de page passe en colonne */
            footer>div.flex {
                flex-direction: column-reverse;
                align-items: center;
                gap: 1.5rem;
            }

            /* Désactive l'effet de distorsion sur mobile pour des raisons de performance et de lisibilité */
            #projets .distort-text.overlay,
            #projets .distort-text.top-layer {
                display: none;
            }

            #projets .clean-top-text {
                position: relative;
                /* Le texte redevient dans le flux normal */
            }
        }

        /* Styles spécifiques pour les écrans très larges (format 16:9 ou plus) */
        @media (min-width: 1024px) and (min-aspect-ratio: 16/9) {
            #hero-section .h-full.flex {
                justify-content: flex-start;
                /* Aligne le contenu à gauche */
            }

            #hero-section h1 {
                text-align: left;
            }

            .video-grid-slide {
                padding: 0 20%;
                /* Augmente les marges pour centrer le contenu */
            }
        }
    </style>
</head>

<body class="antialiased">
    <!-- Début du contenu visible de la page -->

    <!-- Curseur personnalisé composé de deux éléments : un point et un cercle -->
    <div id="custom-cursor">
        <div id="cursor-dot"></div>
        <div id="cursor-outline"></div>
    </div>

    <!-- Écran de pré-chargement qui s'affiche avant le reste du site -->
    <div id="preloader">
        <h1 class="loader-text text-2xl md:text-4xl tracking-wider">
            <!-- L'attribut data-text est utilisé par le CSS pour l'effet glitch -->
            <span data-text="Sooxy_Art">Sooxy_Art</span>
        </h1>
    </div>

    <!-- En-tête de la page, contenant le logo et la navigation -->
    <header class="fixed top-0 left-0 w-full h-14 flex items-center z-50">
        <div class="w-full flex justify-between items-center px-6 md:px-12 lg:px-[17.5%]">
            <!-- Conteneur pour le logo et la localisation -->
            <div class="flex flex-col items-start" style="transform: translateY(10px);">
                <a href="#" id="logo-link" class="block h-10 w-52 transition-opacity duration-300">
                    <img src="images/logo.svg" alt="Logo Sooxy_Art" class="w-full h-full object-contain">
                </a>
                <p id="location-text" class="text-xs text-gray-500 tracking-widest transition-opacity duration-300 w-52 text-right -mt-2" style="transform: translateY(7px);">Paris 巴黎, Kaohsiung 高雄</p>
            </div>
            <!-- Navigation principale -->
            <nav>
                <ul class="flex space-x-4 text-md items-center h-14">
                    <li style="transform: translateY(-2px);"><a href="#" class="transition-colors tracking-widest" style="font-size: 10px;" data-key="about-nav">[&nbsp;À&nbsp;PROPOS&nbsp;]</a></li>
                    <li style="transform: translateY(-2px);"><a href="mailto:n.guignier@gmail.com" class="transition-colors tracking-widest" style="font-size: 10px;" data-key="contact-nav">[&nbsp;CONTACT&nbsp;]</a></li>
                    <!-- Sélecteur de langue -->
                    <li class="flex space-x-2 tracking-widest items-center" style="font-size: 10px;">
                        <span class="mr-2">|</span>
                        <span id="lang-fr" class="lang-switch active">FR</span>
                        <span>/</span>
                        <span id="lang-en" class="lang-switch">EN</span>
                        <span>/</span>
                        <span id="lang-zh" class="lang-switch">ZH</span>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Contenu principal de la page -->
    <main>
        <!-- Section "Hero" : la première chose que l'utilisateur voit -->
        <section id="hero-section" class="reveal relative">
            <div id="parallax-bg"></div> <!-- Image de fond avec effet parallaxe -->
            <div class="h-full flex items-center px-6 md:px-12 lg:px-[17.5%]">
                <div class="max-w-3xl relative z-10">
                    <!-- Conteneur pour le titre principal avec effet de distorsion -->
                    <div class="distort-container">
                        <!-- Plusieurs couches de texte sont utilisées pour créer l'effet de distorsion et d'aberration chromatique -->
                        <h1 class="distort-text base text-5xl md:text-7xl lg:text-8xl font-black leading-tight" data-key="main-title" aria-hidden="true">Motion Designer & Directeur Artistique</h1>
                        <h1 class="distort-text overlay channel-orange text-5xl md:text-7xl lg:text-8xl font-black leading-tight" data-key="main-title" aria-hidden="true">Motion Designer & Directeur Artistique</h1>
                        <h1 class="distort-text overlay channel-b text-5xl md:text-7xl lg:text-8xl font-black leading-tight" data-key="main-title" aria-hidden="true">Motion Designer & Directeur Artistique</h1>
                        <h1 class="distort-text top-layer text-5xl md:text-7xl lg:text-8xl font-black leading-tight" data-key="main-title" aria-hidden="true">Motion Designer & Directeur Artistique</h1>
                        <h1 class="clean-top-text text-5xl md:text-7xl lg:text-8xl font-black leading-tight" data-key="main-title">Motion Designer & Directeur Artistique</h1>
                    </div>
                </div>
            </div>
            <!-- Flèche invitant à faire défiler la page vers le bas -->
            <a href="#video-carousel-section" class="scroll-down-arrow">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="7 13 12 18 17 13"></polyline>
                    <polyline points="7 6 12 11 17 6"></polyline>
                </svg>
            </a>
        </section>

        <!-- Section du carrousel de vidéos -->
        <section id="video-carousel-section" class="reveal text-black flex flex-col items-center">
            <!-- Titre de la section avec effet de distorsion -->
            <div class="distort-container" style="transform: translateY(-2px);">
                <h2 class="distort-text base text-2xl md:text-3xl" data-key="video-projects-title" aria-hidden="true">Projets Vidéo</h2>
                <h2 class="distort-text overlay channel-orange text-2xl md:text-3xl" data-key="video-projects-title" aria-hidden="true">Projets Vidéo</h2>
                <h2 class="distort-text overlay channel-b text-2xl md:text-3xl" data-key="video-projects-title" aria-hidden="true">Projets Vidéo</h2>
                <h2 class="distort-text top-layer text-2xl md:text-3xl" data-key="video-projects-title" aria-hidden="true">Projets Vidéo</h2>
                <h2 class="clean-top-text text-2xl md:text-3xl" data-key="video-projects-title">Projets Vidéo</h2>
            </div>
            <!-- Conteneur du carrousel vidéo -->
            <div id="video-carousel-container">
                <div id="video-carousel-track">
                    <!-- Les diapositives du carrousel seront générées ici par JavaScript -->
                </div>
                <div id="video-carousel-dots">
                    <!-- Les points de navigation seront générés ici par JavaScript -->
                </div>
            </div>
        </section>

        <!-- Wrapper pour la section des projets "Fractal Art" -->
        <div id="project-section-wrapper" class="relative z-20 transition-colors duration-500">
            <section id="projets" class="flex flex-col items-center">
                <!-- Titre de la section avec effet de distorsion -->
                <div class="distort-container" style="transform: translateY(-2px);">
                    <h2 class="distort-text base text-2xl md:text-3xl" data-key="fractal-art-title" aria-hidden="true">Fractal Art</h2>
                    <h2 class="distort-text overlay channel-orange text-2xl md:text-3xl" data-key="fractal-art-title" aria-hidden="true">Fractal Art</h2>
                    <h2 class="distort-text overlay channel-b text-2xl md:text-3xl" data-key="fractal-art-title" aria-hidden="true">Fractal Art</h2>
                    <h2 class="distort-text top-layer text-2xl md:text-3xl" data-key="fractal-art-title" aria-hidden="true">Fractal Art</h2>
                    <h2 class="clean-top-text text-2xl md:text-3xl" data-key="fractal-art-title">Fractal Art</h2>
                </div>
                <!-- Conteneur du carrousel de projets "Fractal Art" -->
                <div id="project-carousel-container" class="reveal">
                    <div id="carousel-track">
                        <!-- Les images du carrousel seront générées ici par JavaScript -->
                    </div>
                </div>
            </section>
        </div>

    </main>

    <!-- Pied de page -->
    <footer class="py-8 relative z-50">
        <div class="w-full flex justify-between items-center px-6 md:px-12 lg:px-[17.5%]">
            <div class="flex items-center">
                <a href="#" class="block">
                    <div class="w-[40px] h-[40px]">
                        <img src="images/logo-carre.svg" alt="Icône Sooxy_Art" class="w-full h-full object-contain">
                    </div>
                </a>
                <p class="text-gray-500 text-sm ml-2">&copy; <span id="year"></span> Sooxy_Art</p>
            </div>
            <!-- Liens vers les réseaux sociaux -->
            <div class="flex space-x-6 relative">
                <a href="https://www.instagram.com/sooxy_art/" target="_blank" aria-label="Instagram" class="social-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </a>
                <a href="https://www.youtube.com/@sooxy9525/videos" target="_blank" aria-label="YouTube" class="social-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
                        <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
                    </svg>
                </a>
            </div>
        </div>
    </footer>

    <!-- Lightbox pour afficher les images en grand -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-[99999] opacity-0 pointer-events-none">
        <button id="lightbox-close" class="absolute top-6 right-6 text-white text-5xl font-light">&times;</button>
        <img id="lightbox-img" src="" alt="Projet en grand" class="max-w-full max-h-[90vh] object-contain">
    </div>

    <!-- Lightbox pour afficher les vidéos -->
    <div id="video-lightbox" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-[99999] opacity-0 pointer-events-none">
        <button id="video-lightbox-close" class="absolute top-6 right-6 text-white text-5xl font-light">&times;</button>
        <div id="video-lightbox-content">
            <iframe id="video-iframe" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
    </div>

    <!-- Filtres SVG utilisés pour l'effet de distorsion. Ils sont cachés. -->
    <svg style="display: none;">
        <filter id="turbulence-filter">
            <feTurbulence type="fractalNoise" baseFrequency="0.001 0.9" numOctaves="1" result="turbulence" />
            <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="30" xChannelSelector="R" yChannelSelector="G" />
        </filter>
        <filter id="turbulence-filter-small">
            <feTurbulence type="fractalNoise" baseFrequency="0.001 0.9" numOctaves="1" result="turbulence" />
            <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="10" xChannelSelector="R" yChannelSelector="G" />
        </filter>
    </svg>

    <!-- Inclusion de la bibliothèque GSAP (GreenSock Animation Platform) pour les animations avancées -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>

    <script>
        // --- DÉBUT DU SCRIPT PRINCIPAL ---

        // Empêche le navigateur de restaurer la position de défilement lors du rechargement de la page,
        // pour que la page s'affiche toujours depuis le haut.
        if (history.scrollRestoration) {
            history.scrollRestoration = 'manual';
        }

        // Écouteur d'événement qui se déclenche lorsque le contenu HTML de la page est entièrement chargé.
        document.addEventListener('DOMContentLoaded', () => {
            const preloader = document.getElementById('preloader');
            const mainContent = document.querySelector('main');

            // Simule un temps de chargement, puis fait disparaître le preloader.
            setTimeout(() => {
                preloader.classList.add('loaded');
                document.body.style.overflow = ''; // Réactive le défilement du corps de la page.

                // Attend un peu après la disparition du preloader pour initialiser toutes les fonctionnalités.
                setTimeout(async () => {
                    mainContent.style.opacity = '1'; // Fait apparaître le contenu principal.

                    // Initialisation des différentes fonctionnalités du site.
                    const carouselInitFn = await initCarousel(); // Initialise le carrousel d'images.
                    initParallax(); // Active l'effet de parallaxe sur l'image de fond.
                    initLanguageSwitcher(); // Met en place le changement de langue.
                    initCustomCursor(); // Active le curseur personnalisé.
                    initHeaderFade(); // Gère l'apparition/disparition du logo au défilement.
                    initTurbulenceEffect(); // Démarre l'animation de l'effet de distorsion.
                    initSectionSnapping(); // Active le défilement "magnétique" entre les sections.
                    initHeaderBackground(); // Gère l'apparition du fond de l'en-tête.
                    initScrollArrowVisibility(); // Gère la visibilité de la flèche de défilement.
                    initLightbox(); // Initialise la visionneuse d'images.
                    initVideoCarousel(); // Initialise le carrousel de vidéos.
                    initVideoLightbox(); // Initialise la visionneuse de vidéos.

                    // Ajoute un défilement doux vers le haut lors du clic sur le logo.
                    document.querySelectorAll('#logo-link, footer a.block').forEach(link => {
                        link.addEventListener('click', e => {
                            e.preventDefault();
                            window.scrollTo({
                                top: 0,
                                behavior: 'smooth'
                            });
                        });
                    });

                    // Met en place l'animation d'apparition des sections au fur et à mesure du défilement.
                    const revealElements = document.querySelectorAll('.reveal');
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) { // Si l'élément entre dans la fenêtre d'affichage...
                                entry.target.classList.add('visible'); // ...on lui ajoute la classe "visible".
                                if (entry.target.id === 'project-carousel-container' && carouselInitFn) {
                                    carouselInitFn(); // Initialise la disposition du carrousel une fois visible.
                                    observer.unobserve(entry.target); // On arrête de l'observer une fois l'animation faite.
                                }
                            }
                        });
                    }, {
                        threshold: 0.1
                    }); // L'animation se déclenche quand 10% de l'élément est visible.
                    revealElements.forEach(el => observer.observe(el));
                }, 500);
            }, 2200); // Durée d'affichage du preloader.

            // Met à jour l'année dans le pied de page.
            document.getElementById('year').textContent = new Date().getFullYear();
        });

        // Fonction pour initialiser l'effet de parallaxe.
        function initParallax() {
            const parallaxBg = document.getElementById('parallax-bg');
            window.addEventListener('scroll', () => {
                // Déplace l'image de fond verticalement à une vitesse plus lente que le défilement.
                parallaxBg.style.transform = `translateY(${window.scrollY * 0.3}px)`;
            });
        }

        // Fonction pour gérer le changement de langue.
        function initLanguageSwitcher() {
            // Objet contenant toutes les traductions.
            const translations = {
                'about-nav': {
                    fr: '[&nbsp;À&nbsp;PROPOS&nbsp;]',
                    en: '[&nbsp;ABOUT&nbsp;]',
                    zh: '[&nbsp;關於&nbsp;]'
                },
                'contact-nav': {
                    fr: '[&nbsp;CONTACT&nbsp;]',
                    en: '[&nbsp;CONTACT&nbsp;]',
                    zh: '[&nbsp;聯繫&nbsp;]'
                },
                'main-title': {
                    fr: 'Motion Designer & Directeur Artistique',
                    en: 'Motion Designer & Art Director',
                    zh: '動態設計師<br>藝術總監'
                },
                'video-projects-title': {
                    fr: 'Projets Vidéo',
                    en: 'Video Projects',
                    zh: '影片項目'
                },
                'fractal-art-title': {
                    fr: 'Fractal Art',
                    en: 'Fractal Art',
                    zh: '分形藝術'
                }
            };
            const langFrBtn = document.getElementById('lang-fr'),
                langEnBtn = document.getElementById('lang-en'),
                langZhBtn = document.getElementById('lang-zh'),
                translatableElements = document.querySelectorAll('[data-key]');

            // Fonction qui applique la langue sélectionnée.
            function setLanguage(lang) {
                document.documentElement.lang = lang; // Met à jour l'attribut lang de la balise <html>.
                document.body.classList.remove('lang-fr', 'lang-en', 'lang-zh');
                document.body.classList.add('lang-' + lang); // Ajoute une classe au body pour des styles spécifiques.

                // Parcourt tous les éléments traduisibles et met à jour leur contenu.
                translatableElements.forEach(el => {
                    const key = el.dataset.key;
                    // CORRECTION: Remplacement de la syntaxe "? ." incorrecte par une vérification standard "&&".
                    if (translations[key] && translations[key][lang]) {
                        el.innerHTML = translations[key][lang];
                    }
                });

                // Met à jour le style du bouton de langue actif.
                langFrBtn.classList.toggle('active', lang === 'fr');
                langEnBtn.classList.toggle('active', lang === 'en');
                langZhBtn.classList.toggle('active', lang === 'zh');
            }
            // Ajoute les écouteurs d'événements aux boutons de langue.
            langFrBtn.addEventListener('click', () => setLanguage('fr'));
            langEnBtn.addEventListener('click', () => setLanguage('en'));
            langZhBtn.addEventListener('click', () => setLanguage('zh'));
            // Définit la langue par défaut au chargement.
            setLanguage('fr');
        }

        // Fonction pour initialiser le curseur personnalisé.
        function initCustomCursor() {
            const cursor = document.getElementById('custom-cursor');
            gsap.set(cursor, {
                xPercent: -50,
                yPercent: -50
            }); // Centre le curseur sur la position de la souris.

            let mouseX = 0,
                mouseY = 0;
            let posX = 0,
                posY = 0;

            // Met à jour les coordonnées de la souris.
            window.addEventListener('mousemove', e => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });

            // Boucle d'animation (ticker) de GSAP pour un mouvement fluide.
            gsap.ticker.add(() => {
                // Le curseur se déplace vers la position de la souris avec un effet de lissage (lerp).
                posX += (mouseX - posX) * 0.5;
                posY += (mouseY - posY) * 0.5;
                gsap.set(cursor, {
                    x: posX,
                    y: posY
                });
            });

            // Sélecteur pour tous les éléments qui doivent interagir avec le curseur.
            const interactiveSelector = 'a, button, .lang-switch, .project-item, .video-item-wrapper, .video-dot, .video-nav-arrow';

            // Change l'apparence du curseur au survol d'un élément interactif.
            document.body.addEventListener('mouseover', e => {
                if (e.target.closest(interactiveSelector)) {
                    cursor.classList.add('hovered');
                }
            });

            // Rétablit l'apparence du curseur lorsque la souris quitte l'élément.
            document.body.addEventListener('mouseout', e => {
                if (e.target.closest(interactiveSelector)) {
                    cursor.classList.remove('hovered');
                }
            });
        }

        // Fonction pour gérer la disparition du logo et du texte de localisation au défilement.
        function initHeaderFade() {
            const locationText = document.getElementById('location-text'),
                logoLink = document.getElementById('logo-link'),
                heroSection = document.getElementById('hero-section');
            if (!locationText || !heroSection || !logoLink) return;

            const updateVisibility = () => {
                // Sur mobile, le logo reste toujours visible.
                if (window.innerWidth <= 768) {
                    locationText.style.opacity = 1;
                    logoLink.style.opacity = 1;
                    return;
                }
                // Sur ordinateur, le logo disparaît progressivement.
                const scrollY = window.scrollY,
                    heroHeight = heroSection.offsetHeight,
                    fadeEnd = heroHeight / 8;
                if (scrollY <= fadeEnd) {
                    const opacity = 1 - (scrollY / fadeEnd);
                    locationText.style.opacity = opacity;
                    logoLink.style.opacity = opacity;
                } else {
                    locationText.style.opacity = 0;
                    logoLink.style.opacity = 0;
                }
            };

            window.addEventListener('scroll', updateVisibility);
            window.addEventListener('resize', updateVisibility);
            updateVisibility(); // Appel initial pour définir l'état au chargement.
        }

        // Fonction asynchrone pour trouver dynamiquement les images du carrousel dans le dossier "images".
        async function findCarouselImages() {
            const images = [];
            for (let i = 1; i < 100; i++) { // Tente de charger jusqu'à 99 images.
                const url = `images/image-carousel${i.toString().padStart(2, '0')}.png`;
                try {
                    // Tente de précharger l'image. Si elle n'existe pas, une erreur est générée.
                    await new Promise((resolve, reject) => {
                        const img = new Image();
                        img.onload = resolve;
                        img.onerror = reject;
                        img.src = url;
                    });
                    images.push(url);
                } catch (error) {
                    break;
                } // Arrête la boucle si une image n'est pas trouvée.
            }
            return images;
        }

        // Fonction pour initialiser le carrousel de projets "Fractal Art".
        async function initCarousel() {
            const imagePaths = await findCarouselImages();
            if (imagePaths.length === 0) return null;
            const container = document.getElementById('project-carousel-container'),
                track = document.getElementById('carousel-track');
            if (!container || !track) return null;

            const REPEAT_COUNT = 20; // Nombre de fois où la liste d'images est clonée pour créer un effet de boucle infini.
            const projectCount = imagePaths.length;
            let targetX = 0,
                currentX = 0;
            const LERP_FACTOR = 0.05; // Facteur de lissage pour le mouvement.
            let isDragging = false,
                startX, startTrackX;
            let originalItems = [];

            // Crée les éléments HTML pour chaque image.
            imagePaths.forEach((path, i) => {
                const item = document.createElement('div');
                item.className = 'project-item';
                item.dataset.index = i;
                item.innerHTML = `<div class="relative w-full h-full project-item-inner"><img src="${path}" alt="Projet ${i + 1}" class="absolute inset-0 w-full h-full object-cover"><div class="absolute inset-0 w-full h-full overflow-hidden sweep-light-wrapper"><div class="absolute inset-0 w-full h-full sweep-light" style="background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%); transform: translateX(-150%) skewX(-20deg);"></div></div></div>`;
                originalItems.push(item);
            });

            // Crée les clones pour la boucle infinie.
            const clonesStart = [];
            for (let i = 0; i < REPEAT_COUNT; i++) {
                originalItems.forEach(item => clonesStart.push(item.cloneNode(true)));
            }
            const clonesEnd = [];
            for (let i = 0; i < REPEAT_COUNT; i++) {
                originalItems.forEach(item => clonesEnd.push(item.cloneNode(true)));
            }

            // Ajoute les clones et les originaux au "track".
            track.innerHTML = '';
            track.append(...clonesStart, ...originalItems, ...clonesEnd);
            const items = Array.from(track.children);
            let currentIndex = projectCount * REPEAT_COUNT; // Commence au milieu de la liste.

            // Met à jour l'état du carrousel (position, élément actif).
            function updateState(instant = false) {
                if (!items[currentIndex] || !container.offsetWidth) return;

                items.forEach((item, index) => {
                    item.style.zIndex = items.length - Math.abs(currentIndex - index);
                });

                let totalWidthBefore = 0;
                for (let i = 0; i < currentIndex; i++) {
                    totalWidthBefore += items[i].offsetWidth;
                }
                targetX = (container.offsetWidth / 2) - (totalWidthBefore + items[currentIndex].offsetWidth / 2);

                if (instant) { // Si le mouvement doit être instantané (sans animation).
                    currentX = targetX;
                    track.style.transition = 'none';
                    track.style.transform = `translateX(${currentX}px)`;
                    track.offsetHeight; // Force le navigateur à appliquer le style.
                    track.style.transition = '';
                }
                items.forEach((item, index) => item.classList.toggle('active', index === currentIndex));
            }

            // Boucle d'animation pour le mouvement lissé.
            function animate() {
                if (isDragging) return;
                currentX += (targetX - currentX) * LERP_FACTOR;
                track.style.transform = `translateX(${currentX}px)`;
                requestAnimationFrame(animate);
            }

            // Recalcule la disposition du carrousel (utile lors du redimensionnement de la fenêtre).
            function recalculateLayout() {
                const scaleFactor = 1 / 0.85;
                const itemsToShow = window.innerWidth < 768 ? 3 : 7;
                const itemWidth = window.innerWidth / (itemsToShow + scaleFactor);
                const activeWidth = itemWidth * scaleFactor;
                const containerHeight = activeWidth * (16 / 9);

                container.style.height = `${containerHeight}px`;
                container.style.setProperty('--active-scale', scaleFactor);

                items.forEach(item => {
                    item.style.width = `${itemWidth}px`;
                });
                updateState(true);
            }

            // Gère la navigation avec la molette de la souris.
            container.addEventListener('wheel', (e) => {
                e.preventDefault();
                e.stopPropagation();
                if (e.deltaY > 5) { // Défilement vers le bas.
                    currentIndex++;
                } else if (e.deltaY < -5) { // Défilement vers le haut.
                    currentIndex--;
                }
                // Gère la "téléportation" pour la boucle infinie.
                if (currentIndex >= items.length - projectCount) {
                    currentIndex = (projectCount * REPEAT_COUNT) + (currentIndex % projectCount);
                    updateState(true);
                } else if (currentIndex < projectCount) {
                    currentIndex = (projectCount * (REPEAT_COUNT + 1)) + (currentIndex % projectCount);
                    updateState(true);
                }
                updateState();
            });

            // Gère la navigation par glisser-déposer (drag).
            container.addEventListener('mousedown', (e) => {
                isDragging = true;
                startX = e.pageX;
                startTrackX = currentX;
            });
            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                e.preventDefault();
                currentX = startTrackX + (e.pageX - startX);
                track.style.transform = `translateX(${currentX}px)`;
            });
            window.addEventListener('mouseup', () => {
                if (!isDragging) return;
                isDragging = false;
                // Trouve l'élément le plus proche du centre et s'y aligne.
                let closestIndex = 0,
                    smallestDist = Infinity;
                items.forEach((item, index) => {
                    const dist = Math.abs((container.offsetWidth / 2) - (item.offsetLeft + item.offsetWidth / 2 + currentX));
                    if (dist < smallestDist) {
                        smallestDist = dist;
                        closestIndex = index;
                    }
                });
                currentIndex = closestIndex;
                updateState();
                requestAnimationFrame(animate);
            });

            // Gère le clic sur les éléments du carrousel.
            track.addEventListener('click', e => {
                const clickedItem = e.target.closest('.project-item');
                if (!clickedItem) return;
                if (clickedItem.classList.contains('active')) { // Si on clique sur l'élément actif, on ouvre la lightbox.
                    const src = clickedItem.querySelector('img').getAttribute('src').replace('image-carousel', 'image-carousel-full');
                    if (window.openLightbox) window.openLightbox(src);
                } else { // Sinon, on centre l'élément cliqué.
                    currentIndex = items.indexOf(clickedItem);
                    updateState();
                }
            });

            window.addEventListener('resize', recalculateLayout);
            recalculateLayout();
            animate();
            return recalculateLayout;
        }

        // Fonction pour initialiser la lightbox d'images.
        function initLightbox() {
            const lightbox = document.getElementById('lightbox'),
                lightboxImg = document.getElementById('lightbox-img'),
                closeBtn = document.getElementById('lightbox-close');
            if (!lightbox || !lightboxImg || !closeBtn) return;

            function openLightbox(src) {
                lightboxImg.src = src;
                lightbox.classList.add('visible');
                document.body.style.overflow = 'hidden'; // Empêche le défilement de la page en arrière-plan.
            }

            function closeLightbox() {
                lightbox.classList.remove('visible');
                document.body.style.overflow = '';
                setTimeout(() => {
                    lightboxImg.src = "";
                }, 300); // Vide la source après la transition pour éviter un flash.
            }
            closeBtn.addEventListener('click', closeLightbox);
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) closeLightbox();
            }); // Ferme en cliquant sur le fond.
            window.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && lightbox.classList.contains('visible')) closeLightbox();
            }); // Ferme avec la touche Échap.
            window.openLightbox = openLightbox; // Rend la fonction accessible globalement.
        }

        // Fonction pour initialiser le carrousel de vidéos.
        function initVideoCarousel() {
            const container = document.getElementById('video-carousel-container');
            const track = document.getElementById('video-carousel-track');
            const dotsContainer = document.getElementById('video-carousel-dots');
            if (!container || !track || !dotsContainer) return;

            const videoIds = ['xv4EETAVVEo', '79flF04k-38', '6N0MP3-AnLk', 'BnzgEM5-0fk', 'j9AvvAueUZ0', '1ETwbLzW_Xw', 'UY7Oe4dI2BE', 'AValbKjx_qA'];
            let itemsPerSlide, numSlides;
            let originalSlides = [];

            // Crée les flèches de navigation et les ajoute au conteneur.
            const prevArrow = document.createElement('button');
            prevArrow.className = 'video-nav-arrow prev';
            prevArrow.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>`;
            const nextArrow = document.createElement('button');
            nextArrow.className = 'video-nav-arrow next';
            nextArrow.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>`;
            container.appendChild(prevArrow);
            container.appendChild(nextArrow);

            // Fonction pour construire (ou reconstruire) le carrousel.
            function buildCarousel() {
                // Détermine le nombre d'éléments par diapositive en fonction de la taille et du ratio de l'écran.
                itemsPerSlide = window.innerWidth <= 768 ? 2 : (window.matchMedia("(min-aspect-ratio: 16/9)").matches ? 4 : 2);
                numSlides = Math.ceil(videoIds.length / itemsPerSlide);
                originalSlides = [];

                // Crée les diapositives et leur contenu.
                for (let i = 0; i < numSlides; i++) {
                    const slide = document.createElement('div');
                    slide.className = 'video-grid-slide';
                    const videoChunk = videoIds.slice(i * itemsPerSlide, (i + 1) * itemsPerSlide);
                    videoChunk.forEach(id => {
                        const wrapper = document.createElement('div');
                        wrapper.className = 'video-item-wrapper aspect-[16/9] bg-black/20 overflow-hidden';
                        wrapper.dataset.videoId = id;
                        const thumbnail = new Image();
                        thumbnail.className = 'w-full h-full object-cover';
                        // Tente de charger la miniature en haute résolution, sinon utilise la résolution standard.
                        thumbnail.onerror = () => {
                            thumbnail.src = `https://i.ytimg.com/vi/${id}/hqdefault.jpg`;
                        };
                        thumbnail.src = `https://i.ytimg.com/vi/${id}/maxresdefault.jpg`;
                        wrapper.appendChild(thumbnail);
                        slide.appendChild(wrapper);
                    });
                    originalSlides.push(slide);
                }

                // Crée les points de navigation.
                dotsContainer.innerHTML = '';
                for (let i = 0; i < numSlides; i++) {
                    const dot = document.createElement('span');
                    dot.className = 'video-dot';
                    dotsContainer.appendChild(dot);
                }

                // Clone les diapositives pour la boucle infinie.
                const clonesStart = originalSlides.map(s => s.cloneNode(true));
                const clonesEnd = originalSlides.map(s => s.cloneNode(true));
                track.innerHTML = '';
                track.append(...clonesEnd, ...originalSlides, ...clonesStart);
            }

            buildCarousel();
            let currentIndex = originalSlides.length; // Commence au début des diapositives originales.
            let dots = Array.from(dotsContainer.children);
            let targetX = 0,
                currentX = 0;
            const LERP = 0.08;

            function updateDots() {
                const activeDotIndex = (currentIndex - originalSlides.length + numSlides) % numSlides;
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === activeDotIndex);
                });
            }

            function update(instant = false) {
                targetX = -currentIndex * container.offsetWidth;
                if (instant) {
                    currentX = targetX;
                    track.style.transition = 'none';
                    track.style.transform = `translateX(${currentX}px)`;
                    track.offsetHeight;
                    track.style.transition = '';
                }
                updateDots();
            }

            function animate() {
                currentX += (targetX - currentX) * LERP;
                track.style.transform = `translateX(${currentX}px)`;
                requestAnimationFrame(animate);
            }

            // Gère le passage à la diapositive suivante/précédente.
            function handleScroll(direction) {
                currentIndex += direction;
                update();

                // Gère la "téléportation" pour la boucle infinie.
                if (currentIndex >= originalSlides.length * 2) {
                    setTimeout(() => {
                        currentIndex = originalSlides.length;
                        update(true);
                    }, 700);
                }
                if (currentIndex < originalSlides.length) {
                    setTimeout(() => {
                        currentIndex = originalSlides.length * 2 - 1;
                        update(true);
                    }, 700);
                }
            }

            prevArrow.addEventListener('click', () => handleScroll(-1));
            nextArrow.addEventListener('click', () => handleScroll(1));

            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    currentIndex = originalSlides.length + index;
                    update();
                });
            });

            track.addEventListener('click', e => {
                const clickedItem = e.target.closest('.video-item-wrapper');
                if (clickedItem && window.openVideoLightbox) {
                    window.openVideoLightbox(clickedItem.dataset.videoId);
                }
            });

            window.addEventListener('resize', () => {
                buildCarousel();
                currentIndex = originalSlides.length;
                dots = Array.from(dotsContainer.children);
                update(true)
            });
            update(true);
            animate();
        }

        // Fonction pour initialiser la lightbox vidéo.
        function initVideoLightbox() {
            const lightbox = document.getElementById('video-lightbox'),
                iframe = document.getElementById('video-iframe'),
                closeBtn = document.getElementById('video-lightbox-close');
            if (!lightbox || !iframe || !closeBtn) return;

            function openVideoLightbox(videoId) {
                iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
                lightbox.classList.add('visible');
                document.body.style.overflow = 'hidden';
            }

            function closeVideoLightbox() {
                iframe.src = ''; // Arrête la vidéo.
                lightbox.classList.remove('visible');
                document.body.style.overflow = '';
            }
            closeBtn.addEventListener('click', closeVideoLightbox);
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) closeVideoLightbox();
            });
            window.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && lightbox.classList.contains('visible')) closeVideoLightbox();
            });
            window.openVideoLightbox = openVideoLightbox;
        }

        // Fonction pour animer l'effet de distorsion sur les titres.
        function initTurbulenceEffect() {
            const turbulence = document.querySelector('#turbulence-filter feTurbulence');
            const turbulenceSmall = document.querySelector('#turbulence-filter-small feTurbulence');

            // Anime en continu la fréquence de la turbulence pour un effet "vivant".
            function animateTurbulence() {
                const randomFreq = 0.9 + (Math.random() - 0.5) * 0.5;
                turbulence.setAttribute('baseFrequency', `0.001 ${randomFreq}`);
                turbulenceSmall.setAttribute('baseFrequency', `0.001 ${randomFreq}`);
                requestAnimationFrame(animateTurbulence);
            }

            // Met à jour la position du masque de l'effet en fonction de la souris.
            const containers = document.querySelectorAll('.distort-container');
            containers.forEach(container => {
                container.addEventListener('mousemove', (e) => {
                    const r = container.getBoundingClientRect();
                    container.style.setProperty('--mouse-x', `${e.clientX - r.left}px`);
                    container.style.setProperty('--mouse-y', `${e.clientY - r.top}px`);
                    container.style.setProperty('--mask-radius', '120px'); // Agrandit le masque.
                });
                container.addEventListener('mouseleave', () => container.style.setProperty('--mask-radius', '0px')); // Réduit le masque.
            });

            animateTurbulence();
        }

        // Fonction pour le défilement "magnétique" entre les sections.
        function initSectionSnapping() {
            const header = document.querySelector('header');
            if (!header) return;
            const sections = Array.from(document.querySelectorAll('#hero-section, #video-carousel-section, #project-section-wrapper, footer'));
            let isSnapping = false; // Verrou pour éviter les défilements multiples.

            window.addEventListener('wheel', (e) => {
                // Désactive le snapping si la souris est sur le carrousel d'images pour ne pas interférer.
                if (isSnapping || e.target.closest('#project-carousel-container')) {
                    e.preventDefault();
                    return;
                }

                // Trouve la section actuellement visible.
                let currentSectionIndex = 0;
                const viewportCenter = window.scrollY + window.innerHeight / 2;
                sections.forEach((section, index) => {
                    if (viewportCenter >= section.offsetTop && viewportCenter < section.offsetTop + section.offsetHeight) {
                        currentSectionIndex = index;
                    }
                });

                const direction = e.deltaY > 0 ? 1 : -1;
                const targetIndex = currentSectionIndex + direction;

                // Si une section cible existe, on s'y rend.
                if (targetIndex >= 0 && targetIndex < sections.length) {
                    e.preventDefault();
                    isSnapping = true;
                    let targetScrollY = sections[targetIndex].offsetTop;
                    window.scrollTo({
                        top: targetScrollY,
                        behavior: 'smooth'
                    });
                    // Déverrouille le snapping après un délai.
                    setTimeout(() => {
                        isSnapping = false;
                    }, 1000);
                }
            }, {
                passive: false
            });
        }

        // Fonction pour gérer l'affichage du fond de l'en-tête.
        function initHeaderBackground() {
            const header = document.querySelector('header');
            const heroSection = document.getElementById('hero-section');
            if (!header || !heroSection) return;

            const updateHeaderState = () => {
                if (window.innerWidth <= 768) {
                    // Sur mobile, le fond apparaît dès qu'on commence à défiler.
                    header.classList.toggle('scrolled', window.scrollY > 10);
                } else {
                    // Sur ordinateur, le fond apparaît lorsque le bas de la section Hero dépasse le haut de l'en-tête.
                    const heroRect = heroSection.getBoundingClientRect();
                    header.classList.toggle('scrolled', heroRect.bottom < header.offsetHeight);
                }
            };

            window.addEventListener('scroll', updateHeaderState);
            window.addEventListener('resize', updateHeaderState);
            updateHeaderState();
        }

        // Fonction pour cacher la flèche de défilement lorsque la section Hero n'est plus visible.
        function initScrollArrowVisibility() {
            const arrow = document.querySelector('.scroll-down-arrow');
            const heroSection = document.getElementById('hero-section');
            if (!arrow || !heroSection) return;

            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    arrow.classList.toggle('hidden', !entry.isIntersecting);
                });
            }, {
                threshold: 0.5
            }); // Se déclenche quand 50% de la section est visible/invisible.
            observer.observe(heroSection);
        }
    </script>
</body>

</html>
